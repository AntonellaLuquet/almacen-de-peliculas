<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Burndown Chart - VersiÃ³n Simple</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .form-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 1.05em;
        }

        input[type="text"],
        input[type="number"],
        textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            font-family: monospace;
            min-height: 120px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .chart-container {
            margin-top: 30px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        canvas {
            width: 100%;
            height: 500px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card h3 {
            font-size: 1em;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
        }

        .hidden {
            display: none;
        }

        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .example-data {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .example-data code {
            background: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“Š Generador de Burndown Chart</h1>
            <p>VersiÃ³n Simple - Sin dependencias externas</p>
        </div>

        <div class="content">
            <div class="alert alert-info">
                <strong>ðŸ’¡ Instrucciones:</strong> Ingresa los datos del sprint y el trabajo restante cada dÃ­a separado por comas.
                Por ejemplo: <code>50, 48, 45, 40, 35, 28, 22, 15, 10, 5, 0</code>
            </div>

            <div class="form-section">
                <h2 style="margin-bottom: 20px; color: #333;">ConfiguraciÃ³n del Sprint</h2>
                
                <div class="form-group">
                    <label for="sprintName">Nombre del Sprint</label>
                    <input type="text" id="sprintName" placeholder="Ej: Sprint 1 - AlmacÃ©n de PelÃ­culas" value="Sprint 1 - Desarrollo de CatÃ¡logo">
                </div>

                <div class="form-group">
                    <label for="workData">Trabajo Restante por DÃ­a (separado por comas)</label>
                    <div class="example-data">
                        <strong>Ejemplo de datos:</strong><br>
                        <code>50, 48, 45, 40, 35, 28, 22, 15, 10, 5, 0</code><br>
                        <small>Esto representa un sprint de 10 dÃ­as con 50 puntos iniciales</small>
                    </div>
                    <textarea id="workData" placeholder="Ej: 50, 48, 45, 40, 35, 28, 22, 15, 10, 5, 0">50, 48, 45, 40, 35, 28, 22, 15, 10, 5, 0</textarea>
                </div>

                <button class="btn" onclick="generateChart()">ðŸ“ˆ Generar GrÃ¡fico</button>
            </div>

            <div id="chartSection" class="hidden">
                <div class="chart-container">
                    <canvas id="burndownCanvas"></canvas>
                </div>

                <div class="stats" id="stats"></div>
            </div>
        </div>
    </div>

    <script>
        function generateChart() {
            const sprintName = document.getElementById('sprintName').value;
            const workDataInput = document.getElementById('workData').value;

            // Parse data
            const workData = workDataInput.split(',').map(val => parseFloat(val.trim())).filter(val => !isNaN(val));

            if (workData.length < 2) {
                alert('Por favor ingresa al menos 2 valores separados por comas');
                return;
            }

            const days = workData.length - 1;
            const totalWork = workData[0];

            // Calculate ideal line
            const idealData = [];
            for (let i = 0; i <= days; i++) {
                idealData.push(totalWork - (totalWork / days) * i);
            }

            // Show chart section
            document.getElementById('chartSection').classList.remove('hidden');

            // Draw chart
            drawChart(sprintName, workData, idealData);

            // Generate stats
            generateStats(workData, idealData, totalWork);
        }

        function drawChart(title, actualData, idealData) {
            const canvas = document.getElementById('burndownCanvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            const width = canvas.clientWidth;
            const height = canvas.clientHeight;
            canvas.width = width;
            canvas.height = height;

            // Clear canvas
            ctx.clearRect(0, 0, width, height);

            // Padding and dimensions
            const padding = 60;
            const chartWidth = width - 2 * padding;
            const chartHeight = height - 2 * padding;

            // Find max value for scaling
            const maxValue = Math.max(...actualData, ...idealData);
            const days = actualData.length - 1;

            // Draw background
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, width, height);

            // Draw title
            ctx.fillStyle = '#333';
            ctx.font = 'bold 20px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(title + ' - Burndown Chart', width / 2, 30);

            // Draw axes
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, height - padding);
            ctx.lineTo(width - padding, height - padding);
            ctx.stroke();

            // Draw grid
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            const gridLines = 5;
            for (let i = 0; i <= gridLines; i++) {
                const y = padding + (chartHeight / gridLines) * i;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();

                // Y-axis labels
                const value = Math.round(maxValue - (maxValue / gridLines) * i);
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.textAlign = 'right';
                ctx.fillText(value.toString(), padding - 10, y + 5);
            }

            // X-axis labels
            for (let i = 0; i <= days; i++) {
                const x = padding + (chartWidth / days) * i;
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('DÃ­a ' + i, x, height - padding + 20);
            }

            // Draw ideal line (dashed)
            ctx.strokeStyle = '#4BC0C0';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            for (let i = 0; i < idealData.length; i++) {
                const x = padding + (chartWidth / days) * i;
                const y = height - padding - (chartHeight * (idealData[i] / maxValue));
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();

            // Draw ideal line points
            ctx.fillStyle = '#4BC0C0';
            for (let i = 0; i < idealData.length; i++) {
                const x = padding + (chartWidth / days) * i;
                const y = height - padding - (chartHeight * (idealData[i] / maxValue));
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, 2 * Math.PI);
                ctx.fill();
            }

            // Draw actual line (solid)
            ctx.strokeStyle = '#9966FF';
            ctx.lineWidth = 3;
            ctx.setLineDash([]);
            ctx.beginPath();
            for (let i = 0; i < actualData.length; i++) {
                const x = padding + (chartWidth / days) * i;
                const y = height - padding - (chartHeight * (actualData[i] / maxValue));
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();

            // Draw actual line points
            ctx.fillStyle = '#9966FF';
            for (let i = 0; i < actualData.length; i++) {
                const x = padding + (chartWidth / days) * i;
                const y = height - padding - (chartHeight * (actualData[i] / maxValue));
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, 2 * Math.PI);
                ctx.fill();
            }

            // Draw legend
            const legendX = width - padding - 150;
            const legendY = padding + 20;

            ctx.fillStyle = '#4BC0C0';
            ctx.fillRect(legendX, legendY, 20, 10);
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('LÃ­nea Ideal', legendX + 25, legendY + 9);

            ctx.fillStyle = '#9966FF';
            ctx.fillRect(legendX, legendY + 20, 20, 10);
            ctx.fillStyle = '#333';
            ctx.fillText('Progreso Real', legendX + 25, legendY + 29);

            // Y-axis label
            ctx.save();
            ctx.translate(15, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Trabajo Restante', 0, 0);
            ctx.restore();

            // X-axis label
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('DÃ­as del Sprint', width / 2, height - 10);
        }

        function generateStats(actualData, idealData, totalWork) {
            const statsDiv = document.getElementById('stats');
            
            const lastActualValue = actualData[actualData.length - 1];
            const lastIdealValue = idealData[actualData.length - 1];
            
            const workCompleted = totalWork - lastActualValue;
            const percentComplete = Math.round((workCompleted / totalWork) * 100);
            
            let status = '';
            if (lastActualValue < lastIdealValue) {
                status = 'ðŸŽ¯ Adelantado';
            } else if (lastActualValue > lastIdealValue) {
                status = 'âš ï¸ Atrasado';
            } else {
                status = 'âœ… En Tiempo';
            }

            const velocity = actualData.length > 1 ? 
                Math.round((actualData[0] - lastActualValue) / (actualData.length - 1) * 10) / 10 : 0;

            statsDiv.innerHTML = `
                <div class="stat-card">
                    <h3>Trabajo Completado</h3>
                    <div class="value">${workCompleted} / ${totalWork}</div>
                </div>
                <div class="stat-card">
                    <h3>Porcentaje Completado</h3>
                    <div class="value">${percentComplete}%</div>
                </div>
                <div class="stat-card">
                    <h3>Trabajo Restante</h3>
                    <div class="value">${lastActualValue}</div>
                </div>
                <div class="stat-card">
                    <h3>Velocidad Promedio</h3>
                    <div class="value">${velocity}/dÃ­a</div>
                </div>
                <div class="stat-card" style="grid-column: span 2;">
                    <h3>Estado del Sprint</h3>
                    <div class="value">${status}</div>
                </div>
            `;
        }

        // Auto-generate on load for demo
        window.addEventListener('load', function() {
            // Uncomment to auto-generate example
            // generateChart();
        });
    </script>
</body>
</html>
